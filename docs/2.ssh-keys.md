# Secure SSH Key Setup for Raspberry Pi

This guide explains how to configure passwordless SSH access to your Raspberry Pi using public and private key authentication. It applies to Raspberry Pi OS Bookworm (Lite or Desktop) and works from Linux, macOS, or Windows (including WSL or PowerShell).

---

## 1. Prerequisites

You should already have:

* Your Raspberry Pi powered on and connected to Wi-Fi or Ethernet
* SSH enabled on the Pi

  * If not, run `sudo raspi-config`, go to Interface Options > SSH > Enable
* The hostname or IP address of your Pi (for example, `spotmicroai.local`)

---

## 2. Check for Existing SSH Keys (on Your Computer)

Open a terminal on your local computer (not the Pi):

```bash
ls ~/.ssh
```

If you see files such as `id_rsa` and `id_rsa.pub` or `id_ed25519` and `id_ed25519.pub`, you already have a key pair and can skip to Step 4.

If not, continue.

---

## 3. Generate a New SSH Key Pair

Run the following command on your local computer:

```bash
ssh-keygen -t ed25519 -C "your_email@example.com"
```

Explanation:

* `-t ed25519` creates a modern, secure key type (recommended over RSA)
* `-C` adds an optional comment to help identify the key later

Press Enter to accept the default file location (`~/.ssh/id_ed25519`) and optionally set a passphrase for extra security.

---

## 4. Copy Your Public Key to the Raspberry Pi

Use one of the following methods.

### Option A: Using ssh-copy-id (recommended)

```bash
ssh-copy-id pi@spotmicroai.local
```

Replace `pi@spotmicroai.local` with your Pi's username and hostname or IP address. You will be asked for your Pi's password one last time. This command automatically adds your key to `~/.ssh/authorized_keys` on the Pi.

### Option B: Manual Copy

If `ssh-copy-id` is not available, you can copy the key manually:

1. Display your public key:

   ```bash
   cat ~/.ssh/id_ed25519.pub
   ```
2. Copy the output string.
3. On the Pi, connect via password SSH:

   ```bash
   ssh pi@spotmicroai.local
   ```
4. On the Pi, create or edit the file:

   ```bash
   mkdir -p ~/.ssh
   nano ~/.ssh/authorized_keys
   ```
5. Paste the public key into the file, save, and exit.
6. Set the correct permissions:

   ```bash
   chmod 700 ~/.ssh
   chmod 600 ~/.ssh/authorized_keys
   ```

---

## 5. Test the Connection

On your local computer, run:

```bash
ssh pi@spotmicroai.local
```

If setup was successful, you should connect without being asked for a password.

---

## 6. Troubleshooting

If you are still prompted for a password:

* Ensure SSH is enabled on the Pi: `sudo systemctl status ssh`
* Check that your key was copied correctly to `~/.ssh/authorized_keys`
* Verify file permissions are correct (as listed above)
* Make sure you are connecting as the same username for which the key was installed

---

## 7. Optional: Use a Custom Key Path

If your key is stored in a custom file, specify it with:

```bash
ssh -i ~/.ssh/custom_key pi@spotmicroai.local
```

You can also define this permanently in an SSH config file:

```bash
nano ~/.ssh/config
```

Example configuration:

```text
Host spotmicroai
    HostName spotmicroai.local
    User pi
    IdentityFile ~/.ssh/id_ed25519
```

Now you can simply connect using:

```bash
ssh spotmicroai
```

Your Raspberry Pi is now configured for secure, passwo
